!function(){"use strict";let e=document.querySelector('link[rel="next"]')?.getAttribute("href");function t(){if(!e)return;new IntersectionObserver(((t,n)=>{try{t.forEach((t=>{t.isIntersecting&&e&&async function(e){try{const t=await fetch(e);if(!t.ok)throw new Error("Failed to fetch page");const n=await t.text(),o=(new DOMParser).parseFromString(n,"text/html"),r=o.querySelectorAll(".post"),c=o.querySelector('link[rel="next"]')?.getAttribute("href");return{posts:r,nextLink:c}}catch(e){throw new Error(e)}}(e).then((t=>{let{posts:o,nextLink:r}=t;o.forEach((e=>{document.querySelector(".gh-postfeed").append(e)})),r?(e=r,n.observe(document.querySelector(".post:last-of-type"))):n.disconnect()}))}))}catch(e){console.log(e)}}),{rootMargin:"150px"}).observe(document.querySelector(".post:last-of-type"))}const n="internal-monologue-theme",o="dark",r="light";function c(){const e=localStorage.getItem(n);return e||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?o:r)}function a(e){const t=document.documentElement;e===o?t.setAttribute("data-theme",o):t.setAttribute("data-theme",r),localStorage.setItem(n,e),window.dispatchEvent(new CustomEvent("themechange",{detail:{theme:e}}))}function i(e){e.preventDefault(),a(c()===o?r:o)}document.addEventListener("DOMContentLoaded",(()=>{document.querySelector(".gh-burger").addEventListener("click",(function(){document.body.classList.toggle("gh-head-open")})),t(),a(c()),document.querySelectorAll(".gh-theme-toggle").forEach((e=>{e.removeEventListener("click",i),e.addEventListener("click",i)})),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{localStorage.getItem(n)||a(e.matches?o:r)}))}))}();
//# sourceMappingURL=index.js.map
